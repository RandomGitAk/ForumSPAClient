<div>
    <div class="page-title"> 
        <h2>Categories</h2> 
        <small> search by name</small>
    </div>
    <app-admin-table [data]="data" [columns]="columns" [showCreateButton]="true" (create)="onCreateNewItem()" (edit)="onEdit($event)" (delete)="onDelete($event)"></app-admin-table>

     <!-- Paginator  -->
     <p-paginator
     [rows]="rows"
     [totalRecords]="totalRecords"
     [rowsPerPageOptions]="[5, 10, 20]"
     (onPageChange)="onPageChange($event)"
     #paginator
     ></p-paginator>
</div>


<p-dialog header="Create Category" [modal]="true" [(visible)]="displayCreateModal" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block">Create category.</span>
    
    <div class="field flex align-items-center gap-3 mb-3">
        <label for="categoryname" class="font-semibold w-6rem">Category name</label>
        <input pInputText id="categoryname" class="flex-auto" [(ngModel)]="newCategory.name" autocomplete="off" />
    </div>
    
    <div class="flex align-items-center gap-3 mb-3">
        <label for="description" class="font-semibold w-6rem">Description</label>
        <textarea 
              id="description" 
              class="flex-auto" 
              rows="5" 
              style="width: 100%;"
              [(ngModel)]="newCategory.description"
              autocomplete="off">
        </textarea>
    </div>
    
    <div class="flex justify-content-end gap-2">
        <p-button label="Cancel" severity="secondary" (onClick)="displayCreateModal = false" />
        <p-button label="Save" (onClick)="create()"/>
    </div>
</p-dialog>


<p-dialog  header="Edit Category" [modal]="true" [(visible)]="displayEditModal" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block">Update your information.</span>
    <div class="field flex align-items-center gap-3 mb-3">
        <label for="categoryname" class="font-semibold w-6rem">Category name</label>
        <input *ngIf="selectedCategory" pInputText id="categoryname" class="flex-auto" [(ngModel)]="selectedCategory.name" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-3">
        <label for="description" class="font-semibold w-6rem">Description</label>
        <textarea *ngIf="selectedCategory" 
              id="description" 
              class="flex-auto" 
              [(ngModel)]="selectedCategory.description" 
              rows="5" 
              style="width: 100%;"
              autocomplete="off">
    </textarea>
    </div>
    <div class="flex justify-content-end gap-2">
        <p-button label="Cancel" severity="secondary" (onClick)="displayEditModal = false" />
        <p-button label="Save" (onClick)="edit()"/>
    </div>
</p-dialog>